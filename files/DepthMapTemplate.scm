(define (DepthMapTemplate image)(let* 
((orignal     0)(image2      0)(backlay2    0)(graylay     0) (dmap        0)(float       0) (textlay     0) (TxtStr      " ") )( set! orignal           (car (gimp-image-get-active-layer image)))( set! graylay           (car (gimp-layer-copy orignal 1)))( gimp-image-add-layer   image  graylay 0)( gimp-drawable-set-name graylay  "graylay" )( set! dmap              (car (gimp-layer-copy orignal 1)))( gimp-image-add-layer   image  dmap 0)( gimp-drawable-set-name dmap  "dmap" )(gimp-drawable-fill      dmap 3)(gimp-desaturate         graylay)( set! image2          (car(gimp-image-new        400  100 0)))( set! backlay2        (car(gimp-layer-new image2 400  100 0 "backlay2" 100 0)))( gimp-image-add-layer   image2  backlay2 0)(gimp-drawable-fill      backlay2 2)(if (string=? (car(gimp-context-get-gradient)) "four3D" ) () (gimp-gradient-new "four3D" )  )(gimp-gradients-set-gradient "four3D")(if (= (car (gimp-gradient-get-number-of-segments "four3D") ) 1 ) (gimp-gradient-segment-range-split-uniform "four3D" 0 1 4) () )(gimp-gradient-segment-set-left-color  "four3D" 0 '(0   0   255) 100)(gimp-gradient-segment-set-right-color "four3D" 0 '(186 0 0)     100)(gimp-gradient-segment-set-middle-pos  "four3D" 0  .16)(gimp-gradient-segment-set-right-pos   "four3D" 0   .29)(gimp-gradient-segment-set-left-pos    "four3D" 1   .29)(gimp-gradient-segment-set-left-color  "four3D" 1 '(186 0 0)       100)(gimp-gradient-segment-set-right-color "four3D" 1 '(255 139 50)     100)(gimp-gradient-segment-set-middle-pos  "four3D" 1  .49)(gimp-gradient-segment-set-right-pos   "four3D" 1   .65)(gimp-gradient-segment-set-left-pos    "four3D" 2   .65)(gimp-gradient-segment-set-left-color  "four3D" 2 '(255 139 50)      100)(gimp-gradient-segment-set-right-color "four3D" 2 '(248 239 19 )    100)(gimp-gradient-segment-set-middle-pos  "four3D" 2  .78)(gimp-gradient-segment-set-right-pos   "four3D" 2   .88)(gimp-gradient-segment-set-left-pos    "four3D" 3   .88)(gimp-gradient-segment-set-left-color  "four3D" 3 '(248 239 19 )      100)(gimp-gradient-segment-set-right-color "four3D" 3 '(249 246 212)    100)(gimp-gradient-segment-set-middle-pos  "four3D" 3  .94)(gimp-gradient-segment-set-right-pos   "four3D" 3   1.0)(gimp-context-set-foreground '(0 0 0))(set! TxtStr "Select A Brush  Ctrl_Brush picks a color   Blu=>Yel  Back=>Front " )(set! textlay (car(gimp-text-layer-new image2 TxtStr "Sans" 4 2  ) ))(gimp-image-add-layer image2  textlay 0)(gimp-layer-set-offsets textlay 5 85)(set! backlay2    (car (gimp-image-merge-down  image2  textlay 0))    )(gimp-rect-select image2 0 0 400 80 0 0 1)(gimp-edit-blend backlay2 3 0 0 100 0 0 0 0 1 0 0 0 10 400 10)(gimp-selection-none image2)(gimp-rect-select image2 0 0 1 1  0 0 1)(gimp-layer-set-opacity dmap  50  )(gimp-image-set-filename image2 "Color Depth Palette_") (gimp-image-set-filename image  "Color Depth Template_") 
(gimp-display-new       image2)))
(script-fu-register "DepthMapTemplate"                    "DepthMapTemplate"                    "Create a Color DepthMap Template for a Picture"                    "Don Sauer www.idea2IC.com"                    "GNU General Public License v3+"                    "2/24/2012"                    "RGB*"                    SF-IMAGE      "Image" 0)
(script-fu-menu-register "DepthMapTemplate" "<Image>/Filters/Stereo 3D Stuff")